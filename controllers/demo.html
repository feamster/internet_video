<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />

  <link href="http://vjs.zencdn.net/5-unsafe/video-js.css" rel="stylesheet"/>
  
  <title>Video Player Demo</title>
  
  <!-- Include the VideoJS Library -->
  <!-- <script src="video.js" type="text/javascript" charset="utf-8"></script> -->


  <!-- Include the VideoJS Stylesheet -->
  <link rel="stylesheet" href="https://vjs.zencdn.net/7.6.6/video-js.css" type="text/css" media="screen" title="Video JS">
</head>
<body>

  <!-- Begin VideoJS -->
  <div class="video-js-box">
    <!-- Using the Video for Everybody Embed Code http://camendesign.com/code/video_for_everybody -->
    
    <script src="http://vjs.zencdn.net/5-unsafe/video.js"></script>
    <script src="videojs-resolution-switcher.js"></script>

    <video id="example_video_1" class="video-js" width="1280" height="720" controls="controls" preload="auto">

      <!-- 240p-webm-242 -->


      <source src="https://r5---sn-vgqsknls.googlevideo.com/videoplayback?expire=1582322004&ei=9PxPXp6HMfSB1uUPy8CZ0A8&ip=128.135.98.129&id=o-ACP67w435W0gP4bV9jCeeY3uNOTws9UrRfPeaKfpCZhu&itag=242&aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&source=youtube&requiressl=yes&mm=31%2C29&mn=sn-vgqsknls%2Csn-vgqsrnes&ms=au%2Crdu&mv=m&mvi=4&pl=16&initcwndbps=1616250&vprv=1&mime=video%2Fwebm&gir=yes&clen=33431297&dur=1403.000&lmt=1540494883769050&mt=1582300293&fvip=5&keepalive=yes&fexp=23842630%2C23878762&c=WEB&txp=5533432&sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cgir%2Cclen%2Cdur%2Clmt&sig=ALgxI2wwRQIhALEvztg2oAsjZVRQx_lD-1yTSIm5IzaQVYvACYeteWfYAiBicL_ZAEEP8eXuLhAuqeZntBTYkdmWKO-TKANGIUquRw%3D%3D&lsparams=mm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&lsig=AHylml4wRgIhAJMjJr4zPNVubKOCTDxSzyo4IV4yewVsPFbg6ejM8YdBAiEAxTm3Un3JO6e9nf7xe6bfeKvfMw-9zy4Keek9e9EA5Us%3D&ratebypass=yes" type='video/mp4' res="240" default label="240p"/>


      <!-- 480-webm-244 -->

      <source src="https://r5---sn-vgqsknls.googlevideo.com/videoplayback?expire=1582322004&ei=9PxPXp6HMfSB1uUPy8CZ0A8&ip=128.135.98.129&id=o-ACP67w435W0gP4bV9jCeeY3uNOTws9UrRfPeaKfpCZhu&itag=244&aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&source=youtube&requiressl=yes&mm=31%2C29&mn=sn-vgqsknls%2Csn-vgqsrnes&ms=au%2Crdu&mv=m&mvi=4&pl=16&initcwndbps=1616250&vprv=1&mime=video%2Fwebm&gir=yes&clen=118048186&dur=1403.000&lmt=1540495020290526&mt=1582300293&fvip=5&keepalive=yes&fexp=23842630%2C23878762&c=WEB&txp=5533432&sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cgir%2Cclen%2Cdur%2Clmt&sig=ALgxI2wwRAIgA9KZhRfIt6g45rgtlouzIRtAYd49j3IA5LCsIpJFMQICIGPNbvfPPoOupSDISRCWqiPPX3P5ukxFoYWLz0rXHybV&lsparams=mm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&lsig=AHylml4wRgIhAJMjJr4zPNVubKOCTDxSzyo4IV4yewVsPFbg6ejM8YdBAiEAxTm3Un3JO6e9nf7xe6bfeKvfMw-9zy4Keek9e9EA5Us%3D&ratebypass=yes" type='video/webm; codecs="vp9, vorbis"' res="480" label="480p"/>


      <!-- 720-webm-247 -->

      <source src="https://r5---sn-vgqsknls.googlevideo.com/videoplayback?expire=1582322004&ei=9PxPXp6HMfSB1uUPy8CZ0A8&ip=128.135.98.129&id=o-ACP67w435W0gP4bV9jCeeY3uNOTws9UrRfPeaKfpCZhu&itag=247&aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&source=youtube&requiressl=yes&mm=31%2C29&mn=sn-vgqsknls%2Csn-vgqsrnes&ms=au%2Crdu&mv=m&mvi=4&pl=16&initcwndbps=1616250&vprv=1&mime=video%2Fwebm&gir=yes&clen=210836755&dur=1403.000&lmt=1540494937169898&mt=1582300293&fvip=5&keepalive=yes&fexp=23842630%2C23878762&c=WEB&txp=5533432&sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cgir%2Cclen%2Cdur%2Clmt&sig=ALgxI2wwRQIhANZLfKfmiWjJMkhFrsUfCtGWLZ-1B6Ms7-WoIjS0iRazAiA1fPt11bA2xgdvDpUz9u0lYH2NvVuOLvEx3pT61vdr0g%3D%3D&lsparams=mm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&lsig=AHylml4wRgIhAJMjJr4zPNVubKOCTDxSzyo4IV4yewVsPFbg6ejM8YdBAiEAxTm3Un3JO6e9nf7xe6bfeKvfMw-9zy4Keek9e9EA5Us%3D&ratebypass=yes" type='video/webm; codecs="vp9, vorbis"' res="720" label="720p"/> 

      <!-- 1080-webm-137 -->

      <source src="https://r5---sn-vgqsknls.googlevideo.com/videoplayback?expire=1582322004&ei=9PxPXp6HMfSB1uUPy8CZ0A8&ip=128.135.98.129&id=o-ACP67w435W0gP4bV9jCeeY3uNOTws9UrRfPeaKfpCZhu&itag=137&aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&source=youtube&requiressl=yes&mm=31%2C29&mn=sn-vgqsknls%2Csn-vgqsrnes&ms=au%2Crdu&mv=m&mvi=4&pl=16&initcwndbps=1616250&vprv=1&mime=video%2Fmp4&gir=yes&clen=435266398&dur=1403.000&lmt=1579436395001663&mt=1582300293&fvip=5&keepalive=yes&fexp=23842630%2C23878762&c=WEB&txp=5535432&sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cgir%2Cclen%2Cdur%2Clmt&sig=ALgxI2wwRQIgUjsPtefuMggOqLZU129nmJG2lCj5QN0T8ErRsE6zJiUCIQChwqIHzpz2Q-NwTh-f1iFp0qn7JEimEz1kTxAJWoRhhg%3D%3D&lsparams=mm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&lsig=AHylml4wRgIhAJMjJr4zPNVubKOCTDxSzyo4IV4yewVsPFbg6ejM8YdBAiEAxTm3Un3JO6e9nf7xe6bfeKvfMw-9zy4Keek9e9EA5Us%3D&ratebypass=yes" type='video/webm; codecs="vp9, vorbis"' res="1080" label="1080p"/>


    </video>

  <script>
    videojs('example_video_1').videoJsResolutionSwitcher()
  </script>

  <script type="text/javascript">
    var player = videojs('example_video_1');

    player.on('resolutionchange', function(){
      console.info('Source changed to %s', player.src())
    })
  </script>


  <script>
    
    var player = videojs('example_video_1');

    var eventPoller = setInterval(function() {
      var buffered = player.buffered();
      var curTime = player.currentTime();
      var currentResolution = player.currentResolutionState.label;
      var source = player.src();
      var mod_num = Math.round(curTime);

      for(i=0;i<buffered.length;i++)
      {
        if (buffered.start(i) <= curTime && curTime <= buffered.end(i))
        {
          console.log("Player Time: " + curTime + ", " + "Current Buffer: " + (buffered.end(i) - curTime) + ", " + "Current Resolution: " + currentResolution);
        }
      }

      if (mod_num % 10 == 0) {
        if (mod_num % 20 ==0){
            player.currentResolution('240p')

        }
        else {
            player.currentResolution('1080p')
        }

      }

    }, 1000)

  </script>

  </div>
  <!-- End VideoJS -->


</body>
</html>