<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />

  <link href="http://vjs.zencdn.net/5-unsafe/video-js.css" rel="stylesheet"/>
  
  <title>Video Player Demo</title>
  
  <!-- Include the VideoJS Library -->
  <!-- <script src="video.js" type="text/javascript" charset="utf-8"></script> -->


  <!-- Include the VideoJS Stylesheet -->
  <link rel="stylesheet" href="https://vjs.zencdn.net/7.6.6/video-js.css" type="text/css" media="screen" title="Video JS">
</head>
<body>

  <!-- Begin VideoJS -->
  <div class="video-js-box">
    <!-- Using the Video for Everybody Embed Code http://camendesign.com/code/video_for_everybody -->
    
    <script src="http://vjs.zencdn.net/5-unsafe/video.js"></script>
    <script src="videojs-resolution-switcher.js"></script>

    <video id="example_video_1" class="video-js" width="1280" height="720" controls="controls" preload="auto">

      <!-- 240p-webm-242 -->


      <source src="https://r5---sn-vgqsknls.googlevideo.com/videoplayback?expire=1582594602&ei=yiVUXo64NoeViwTxjI3QDg&ip=128.135.98.92&id=o-AAMyadqRx1kCJYPJiKYAk330k1qmoxyBfqc91Mm9IZUj&itag=242&aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&source=youtube&requiressl=yes&mm=31%2C26&mn=sn-vgqsknls%2Csn-p5qs7nek&ms=au%2Conr&mv=m&mvi=4&pl=16&pcm2=yes&initcwndbps=1716250&vprv=1&mime=video%2Fwebm&gir=yes&clen=33431297&dur=1403.000&lmt=1540494883769050&mt=1582572934&fvip=5&keepalive=yes&fexp=23842630&c=WEB&txp=5533432&sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cpcm2%2Cvprv%2Cmime%2Cgir%2Cclen%2Cdur%2Clmt&sig=ALgxI2wwRQIgSxYW2YOf-0ajAFh9LeK3vaR6aRLXl4UEpALVW13MjQkCIQDzc52Xo3VJtmIY5X83lHnvV7dW3tGnPO5g93GwGJNfMw%3D%3D&lsparams=mm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&lsig=AHylml4wRgIhALT5BpWt8C4kXPBZPbRjqE6uinsxOtdoMOzIBRSyxYjaAiEA1G8RPDc2W7nIULBJkOT6CRKx2vrfuSyqoUx70Dxp6tQ%3D&ratebypass=yes" type='video/mp4' res="240" default label="240p"/>


      <!-- 480-webm-244 -->

      <source src="https://r5---sn-vgqsknls.googlevideo.com/videoplayback?expire=1582594602&ei=yiVUXo64NoeViwTxjI3QDg&ip=128.135.98.92&id=o-AAMyadqRx1kCJYPJiKYAk330k1qmoxyBfqc91Mm9IZUj&itag=244&aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&source=youtube&requiressl=yes&mm=31%2C26&mn=sn-vgqsknls%2Csn-p5qs7nek&ms=au%2Conr&mv=m&mvi=4&pl=16&pcm2=yes&initcwndbps=1716250&vprv=1&mime=video%2Fwebm&gir=yes&clen=118048186&dur=1403.000&lmt=1540495020290526&mt=1582572934&fvip=5&keepalive=yes&fexp=23842630&c=WEB&txp=5533432&sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cpcm2%2Cvprv%2Cmime%2Cgir%2Cclen%2Cdur%2Clmt&sig=ALgxI2wwRAIga22WR5DaqhrdnWZhgrIUVJp9lfCYKP-88d6ci9Fd0_0CIEGw7uEcoTtp8ccTiruEDNsJOUNHy1LXUtKqa7xFtqvu&lsparams=mm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&lsig=AHylml4wRgIhALT5BpWt8C4kXPBZPbRjqE6uinsxOtdoMOzIBRSyxYjaAiEA1G8RPDc2W7nIULBJkOT6CRKx2vrfuSyqoUx70Dxp6tQ%3D&ratebypass=yes" type='video/webm; codecs="vp9, vorbis"' res="480" label="480p"/>


      <!-- 720-webm-247 -->

      <source src="https://r5---sn-vgqsknls.googlevideo.com/videoplayback?expire=1582594602&ei=yiVUXo64NoeViwTxjI3QDg&ip=128.135.98.92&id=o-AAMyadqRx1kCJYPJiKYAk330k1qmoxyBfqc91Mm9IZUj&itag=247&aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&source=youtube&requiressl=yes&mm=31%2C26&mn=sn-vgqsknls%2Csn-p5qs7nek&ms=au%2Conr&mv=m&mvi=4&pl=16&pcm2=yes&initcwndbps=1716250&vprv=1&mime=video%2Fwebm&gir=yes&clen=210836755&dur=1403.000&lmt=1540494937169898&mt=1582572934&fvip=5&keepalive=yes&fexp=23842630&c=WEB&txp=5533432&sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cpcm2%2Cvprv%2Cmime%2Cgir%2Cclen%2Cdur%2Clmt&sig=ALgxI2wwRgIhAPCNor0IfI2pcaiigQFCPtef7WzQZBHhYExLv7TGk82mAiEA9LKx5_j1bd4U58pYZKtiz7md_vn7P9SyDvl3RfnDs2w%3D&lsparams=mm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&lsig=AHylml4wRgIhALT5BpWt8C4kXPBZPbRjqE6uinsxOtdoMOzIBRSyxYjaAiEA1G8RPDc2W7nIULBJkOT6CRKx2vrfuSyqoUx70Dxp6tQ%3D&ratebypass=yes" type='video/webm; codecs="vp9, vorbis"' res="720" label="720p"/> 

      <!-- 1080-webm-137 -->

      <source src="https://r5---sn-vgqsknls.googlevideo.com/videoplayback?expire=1582594602&ei=yiVUXo64NoeViwTxjI3QDg&ip=128.135.98.92&id=o-AAMyadqRx1kCJYPJiKYAk330k1qmoxyBfqc91Mm9IZUj&itag=137&aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&source=youtube&requiressl=yes&mm=31%2C26&mn=sn-vgqsknls%2Csn-p5qs7nek&ms=au%2Conr&mv=m&mvi=4&pl=16&pcm2=yes&initcwndbps=1716250&vprv=1&mime=video%2Fmp4&gir=yes&clen=435266398&dur=1403.000&lmt=1579436395001663&mt=1582572934&fvip=5&keepalive=yes&fexp=23842630&c=WEB&txp=5535432&sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cpcm2%2Cvprv%2Cmime%2Cgir%2Cclen%2Cdur%2Clmt&sig=ALgxI2wwRgIhAJm56UP2M6jyutzpqmwNdU3Cy4-3XX35JOeoLd_pKvQaAiEA9TTO_Z_CrjoQzOnKYXTQNekADifvcmTEiwJ2jMTH5io%3D&lsparams=mm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&lsig=AHylml4wRgIhALT5BpWt8C4kXPBZPbRjqE6uinsxOtdoMOzIBRSyxYjaAiEA1G8RPDc2W7nIULBJkOT6CRKx2vrfuSyqoUx70Dxp6tQ%3D&ratebypass=yes" type='video/webm; codecs="vp9, vorbis"' res="1080" label="1080p"/>


    </video>

  <script>
    videojs('example_video_1').videoJsResolutionSwitcher()
  </script>

  <script type="text/javascript">
    var player = videojs('example_video_1');

    player.on('resolutionchange', function(){
      console.info('Source changed to %s', player.src())
    })
  </script>


  <script>
    
    var player = videojs('example_video_1');

    var eventPoller = setInterval(function() {
      var buffered = player.buffered();
      var curTime = player.currentTime();
      var currentResolution = player.currentResolutionState.label;
      var source = player.src();
      var mod_num = Math.round(curTime);

      for(i=0;i<buffered.length;i++)
      {
        if (buffered.start(i) <= curTime && curTime <= buffered.end(i))
        {
          console.log("Player Time: " + curTime + ", " + "Current Buffer: " + (buffered.end(i) - curTime) + ", " + "Current Resolution: " + currentResolution);
        }
      }

      if (mod_num % 10 == 0) {
        if (mod_num % 20 ==0){
            player.currentResolution('240p')

        }
        else {
            player.currentResolution('1080p')
        }

      }

    }, 1000)

  </script>

  </div>
  <!-- End VideoJS -->


</body>
</html>